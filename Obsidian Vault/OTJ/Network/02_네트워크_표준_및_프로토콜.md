# 프로토콜

## 개념

- 컴퓨터 및 네트워크 간 통신하기 위해 정의된 규칙과 규약의 집합

## 구성

- 문법(Syntax)
	- 데이터를 어떻게 구성할지, 코딩 방법, 신호 레벨 등에 대한 정보
- 의미(Semantic)
	- 데이터나 예외에 대해 어떻게 처리할 것인지에 대한 정보
- 타이밍(Timing)
	- 통신이 이루어질 때 속도에 대한 조절과 순서 관리를 위한 기법

## 역할

- 에러 제어
- 캡슐화
- 연결 제어/세션 관리
- 순서 제어
- 흐름 제어
- 혼잡 제어
- 동기화
- 주소 지정
- 단편화 및 재조립
- 데이터의 형식화

## 데이터 단위(PDU, Protocol Data Unit)
~~OSI, TCP/IP model에 대해서는 따라오는 다음 단에서 설명 계속~~

| OSI 7 Layer  | TCP/IP (5 layer model) |   PDU    |
| :----------: | :--------------------: | :------: |
| Application  |      Application       |   Data   |
| Presentation |      Application       |   Data   |
|   Session    |      Application       |   Data   |
|  Transport   |       Transport        | Segments |
|   Network    |   Network(Internet)    | Packets  |
|  Data Link   |       Data Link        |  Frames  |
|   Physical   |        Physical        |   Bits   |
- 비트(Bit)
	- 0과 1로 표현되는 가장 기본적인 정보 단위
	- physical layer에서 이 비트를 전기적 신호로 변환하여 네트워크를 통해 전송
	- 해당 신호는 케이블, 무선, 광섬유 등의 매체를 통해 전송될 수 있음
- 프레임(Frame)
	- Data Link 계층에서 데이터를 주고받을 때 사용하는 기본적인 데이터 단위
	- Frame = Frame Header + Payload + Frame trailer
- 패킷(Packet)
	- Network를 통해 전송하기 쉽도록 자른 데이터의 전송 단위
	- 데이터 전송에서 송수신 측에 의해 하나의 단위로 취급되어 전송되는 집합체
	- 각각의 패킷에는 별도의 번호가 붙여지고 목적지의 인터넷 주소가 기록되며 에러 체크 데이터도 포함됨
- 세그먼트(Segment)
	- TCP 프로토콜에서 데이터 전송을 위해 사용되는 단위
	- 세그먼트에는 데이터, 제어 정보 및 오류 검출을 위한 체크섬 등이 포함됨
- 데이터 (Data)
	- 통신에서 사용되는 데이터 전송의 기본 단위인 PDU중에서 실제 데이터를 나타냄

# OSI 7 Layer & TCP/IP 4 Layer

## OSI 7 layer

| 계층  |      이름      |   PDU    | 역할                                                                      | 예시                  |
| :-: | :----------: | :------: | ----------------------------------------------------------------------- | ------------------- |
|  7  | Application  |   Data   | 어떤 서비스를 제공할 것인가?<br>이메일 및 파일 전송, 웹사이트와 상호 작용                            | SMTP, HTTP, FTP     |
|  6  | Presentation |   Data   | 데이터를 어떤 형식으로 할 것인가?<br>데이터 변환, 암/복호화, 압축/해제                             | SSL, TLS            |
|  5  |   Session    |   Data   | 누구와 통신 할 것인가?<br>세션 체결, 통신 방식 설정 및 동기화                                  | RPC(Sockets), API   |
|  4  |  Transport   | Segments | 통신의 신뢰성을 어떻게 확보할 것인가?<br>데이터를 신뢰성과 정확성 있는 전달                            | TCP, UDP            |
|  3  |   Network    | Packets  | 네트워크를 어떻게 중개할 것인가?<br>IP를 사용하여 라우터를 통해 통신<br>다른 네트워크와 통신을 위한 경로 설정      | IP, ICMP            |
|  2  |  Data Link   |  Frames  | 같은 네트워크에서 어떻게 통신할 것인가?<br>MAC을 사용하여 스위치를 통해 통신<br>인접한 네트워크 기기 간의 데이터 전송 | ARP, VLAN, Ethernet |
|  1  |   Physical   |   Bits   | 물리적으로 어떻게 연결할 것인가?<br>물리적인 연결과 전기 신호 변환                                 | fiber, Wireless     |

## TCP/IP 4 layer

| 계층  | OSI model과 대응되는 계층 |        이름         |
| :-: | :----------------: | :---------------: |
|  4  |      7, 6, 5       |    Application    |
|  3  |         4          |     Transport     |
|  2  |         3          | Network(Internet) |
|  1  |        2, 1        |  Network Access   |
~~TCP/IP 5 layer model에서는 위의 표에서 보이는 1계층을 나누어 Data Link, Physical 계층으로 나눔~~

- 인터넷을 위한 프로토콜을 정의한 모델
- TCP/IP 프로토콜을 중심으로 구성되는 일련의 프로토콜들의 총칭
- OSI model과 비교하여 일반적으로 표현되는 4계층 모델임

## 캡슐화(Encapsulation)/역캡슐화(Decapsulation)

![[02_encapsulation.png]]
- 캡슐화(Encapsulation)
	- 데이터의 앞부분에 전송하는데 필요한 정보를 붙여서 다음 계층으로 보내는 과정
- 역캡슐화(Decapsulation)
	- 데이터를 받는 과정에서 헤더를 하나씩 제거하는 과정
