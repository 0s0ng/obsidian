1. **브라우저 주소창**에 www.google.com을 입력한다.
2. 브라우저가 www.google.com의 **IP 주소**를 찾기 위해 **캐시**에서 **DNS 기록**을 확인한다.
3. 만약 요청한 URL(www.google.com)이 캐시에 없다면, **ISP의 DNS 서버**가 **DNS 쿼리로** www.google.com을 **호스팅**하는 서버의 IP 주소를 찾는다.
4. 브라우저가 해당 서버와 **TCP 연결**을 시작한다.
5. 브라우저가 웹서버에 **HTTP 요청**을 보낸다.
6. 서버가 요청을 처리하고 **응답**을 보낸다.
7. 서버가 **HTTP 응답**을 보낸다.
8. 브라우저가 **HTML** 컨텐츠를 보여준다.




---
1. DNS 조회

- **사용자 입력:** 브라우저 주소창에 URL(예: `www.google.com`)을 입력하면, 브라우저는 먼저 캐시에서 해당 도메인의 IP 주소를 찾습니다.
- **DNS 서버 검색:** 캐시에 없으면, DNS(Domain Name System) 서버에 문의하여 웹 서버의 실제 IP 주소를 찾습니다.
- **IP 주소 응답:** DNS 서버는 해당 IP 주소를 브라우저에 응답하고, 이 IP 주소는 후속 요청을 위해 캐시됩니다. 

2. 서버 통신

- **TCP 연결:** 브라우저는 찾은 IP 주소를 기반으로 웹 서버와 TCP(Transmission Control Protocol) 연결을 시작합니다.
- **HTTP 요청:** 브라우저는 웹 서버에게 필요한 웹 페이지 데이터를 달라는 HTTP 요청을 보냅니다.
- **응답 전송:** 웹 서버는 요청을 처리하고, HTML, CSS, JavaScript 파일 등 페이지를 구성하는 데이터를 HTTP 응답으로 브라우저에 다시 전송합니다. 

3. 브라우저 렌더링

- **DOM 트리 생성:** 브라우저가 받은 HTML 파일을 파싱(parsing)하여 구조를 나타내는 DOM(Document Object Model) 트리를 만듭니다.
- **CSSOM 트리 생성:** CSS 파일을 파싱하여 스타일 규칙을 나타내는 CSSOM(CSS Object Model) 트리를 만듭니다.
- **렌더 트리 생성:** DOM 트리와 CSSOM 트리를 결합하여 화면에 표시할 렌더 트리를 생성합니다.
- **레이아웃 계산:** 렌더 트리를 바탕으로 각 요소의 위치와 크기(레이아웃)를 계산합니다.
- **페인트(Paint):** 계산된 레이아웃을 기반으로 화면에 실제 픽셀을 그리는 렌더링 과정을 수행하여 최종적으로 웹 페이지를 시각적으로 화면에 표시합니다.

---

# 네트워크 장비 관점에서의 데이터 흐름 분석 (요청 과정)

#### 1. 사용자 컴퓨터: 캡슐화 (L7 → L1)

- 사용자의 컴퓨터에서 구글 서버로 보낼 데이터(예: HTTP 요청)는 상위 계층(7계층)에서 하위 계층(1계층)으로 내려오면서 각 계층의 헤더와 꼬리말이 추가되는 **캡슐화(Encapsulation)** 과정을 거칩니다.
- **3계층 (네트워크 계층):** 라우팅을 위해 **IP 주소(논리 주소)**가 설정되고 **패킷(Packet)**이 형성됩니다. 이 계층에서 경로를 선택하는 **라우팅**이 이루어집니다.
- **2계층 (데이터 링크 계층):** 패킷은 **프레임(Frame)** 단위로 나뉘고, **MAC 주소**가 지정되어 **직접 연결된 이웃 컴퓨터**와의 통신을 다룹니다.

#### 2. 로컬 네트워크 (LAN) 내 이동 (스위치 노드)

1. **사용자 → 스위치 (Layer 2):**
    
    - 사용자 컴퓨터의 **NIC**에서 프레임이 **비트** 단위로 변환되어 물리적 매체(케이블)를 통해 **스위치** 노드로 전달됩니다.
    - **스위치(L2 장비)**는 **프레임** 단위로 데이터를 처리하며, **MAC 주소(물리 주소)**를 기반으로 네트워크 내의 노드 간 통신을 관리합니다. 스위치는 MAC 주소 표(**MAC Address Table**)를 사용하여 데이터 패킷이 의도한 목적지에 도달하도록 합니다.
    - 스위치는 2계층 장비이므로, 원칙적으로는 **프레임**의 헤더(MAC 주소)까지만 검사하고 처리하며, 3계층 헤더(IP 주소)를 **역캡슐화하여 패킷을 분리**할 필요 없이 다음 장비로 **프레임을 그대로 전달**합니다.
2. **스위치 → 라우터 (L2에서 L3로 경계 이동):**
    
    - 스위치는 프레임의 목적지 MAC 주소가 **다음 홉(Next Hop)**, 즉 로컬 네트워크를 벗어나 인터넷으로 연결해 줄 **라우터**의 MAC 주소임을 확인하고 해당 포트로 프레임을 전달합니다.

#### 3. 네트워크 간 이동 (라우터 노드)

1. **라우터 노드에서 처리:**
    - 라우터에 도착한 프레임은 **데이터 링크 계층(L2)**에서 **역캡슐화**되어 **패킷(L3)**을 분리해냅니다.
    - **라우터(L3 장비)**는 이 패킷의 **IP 주소**를 분석하고 **라우팅 알고리즘**을 사용하여 패킷을 **네트워크 간에** 전달할 **경로를 선택**하는 **라우팅** 작업을 수행합니다.
    - 라우터는 다음 홉(다음 라우터)의 IP 주소를 결정한 뒤, 해당 경로에 맞게 **다시 2계층 캡슐화**를 수행합니다. 즉, 새로운 프레임 헤더에 다음 라우터의 MAC 주소를 넣어 **새로운 프레임**을 만듭니다.
    - 라우터는 **패킷(L3)**을 네트워크 간에 전달하며, 이 과정에서 데이터는 광섬유 케이블과 같은 **전송 매체**를 이용하는 **인터넷 백본망**을 통과합니다.

#### 4. 구글 서버 네트워크 내 진입 및 최종 전달

1. **중간 라우터들:**
    
    - 패킷은 수많은 중간 라우터를 거치며 이 **라우팅 및 재캡슐화 과정**을 반복하여 목적지(구글 서버의 네트워크)에 가까워집니다.
2. **구글 서버 네트워크 (스위치 노드):**
    
    - 최종 라우터에서 패킷은 구글 서버가 속한 로컬 네트워크의 **스위치**로 전송됩니다. 이 스위치는 서버에 **직접 연결된** 장비입니다.
    - 스위치는 라우터로부터 받은 프레임을 처리하고, **MAC 주소 테이블**을 참조하여 이 프레임을 최종적으로 **구글 서버의 NIC**로 전달합니다.
3. **구글 서버: 최종 역캡슐화 (L1 → L7):**
    
    - 구글 서버의 NIC는 프레임을 받아 비트 스트림에서 프레임으로 변환합니다.
    - 데이터는 **데이터 링크 계층(L2)**부터 **응용 계층(L7)**까지 상향식으로 **디캡슐화(De-encapsulation)** 과정을 거치며 각 계층의 헤더와 꼬리말이 제거됩니다.
    - 최종적으로 **응용 계층**에 도달하면 원본 데이터(사용자의 웹페이지 요청)만 남아 서버가 이를 처리하게 됩니다.

### 요약 및 검토

사용자님의 질의 내용을 장비 관점에서 정리하면 다음과 같습니다.

|단계|사용자님 설명|소스 기반의 정확한 설명|
|:--|:--|:--|
|**1. 출발**|프레임으로 캡슐화된 데이터가 스위치로 감.|사용자 장치는 프레임(L2)을 비트로 변환하여 스위치(L2 장비)로 전달함.|
|**2. 스위치 → 라우터**|스위치에서 MAC 주소를 통해 판별해서 라우터로 보냄.|**스위치(L2)**는 MAC 주소 테이블을 사용해 프레임을 **직접 연결된** 다음 홉(라우터)으로 전송함.|
|**3. 라우터**|라우터에서 패킷으로 역캡슐화해서 IP 주소를 통해 다른 라우터로 전송함.|**라우터(L3)**는 프레임에서 **패킷**을 분리(역캡슐화)하여 **IP 주소**를 확인하고 **라우팅**을 수행함. 이후 다음 라우터의 MAC 주소로 **새로운 프레임**을 만들어 재전송합니다.|
|**4. 구글 네트워크 진입**|해당 라우터에서 구글 서버의 스위치로 보냄.|인터넷 백본을 거친 패킷은 최종적으로 구글 서버 네트워크의 라우터/게이트웨이를 거쳐 서버에 **직접 연결된 스위치**로 전달됩니다.|
|**5. 최종 서버 전달**|스위치에서 다시 프레임으로 캡슐화되어서 구글 서버로 전송됨.|스위치는 **프레임**을 그대로 구글 서버 NIC로 전달하고, **서버가 프레임(L2)을 받아 최종적으로 응용 계층(L7)까지 디캡슐화**하여 요청을 처리합니다.|

---
브랜치 ojt/network
vpn 인터넷 공중망(주로 기업간) ipsec, ssl 사용 터널링 기술(전송/터널)
	터널 - 데이터 전체를 암호화
	서로 vpn 통신을 하는지 어떻게 아는가?
		서버 - 클라이언트

라우터의 ip를 더 씌운다? - 터널에서 ip (gateway new ip header)
동작 순서


이미지 무슨 이미지명 수정
넘버링 추가
# 1. 000
## 1.1 000
### 1.1.1 000

하이라이트 마크다운 빼기  (이건 옵시디언에서만 적용되는 마크다운임)
커밋 남길 때 신중하게 (막무가내로 커밋 남발하지 않기)

mtu size, window size  연관성에 대해 정리 (노티 필요!!)
1시간 정도 3명이서 같이 ppt, text (발표 자료는 알아서) 발표 
mtu 사이즈가 더 큰것도 확인 - 왜지?



필요성에 대해서 더 고민해보고 정리하기 
network/파일 -> 피드백 만들어서 자료 남기기
feedback
1주차-OJT리뷰 (피드백 받은거, 어떤거에대해서 질문을 받았고 그 부분에 대해서 공부한거 정리해두기)

//![w:650].(이미지경로)

# keyword

vpn : 암호화 방식 ipsec /ssl

ipsec에서 보안 프로토콜 지원
전송 모드/ 터널 모드

전송 모드 : ip header 자체를 암호화하지 않음 
터널 모드 : 전체를 암호화 새 ip 헤더를 붙임 (vpn gateway)

