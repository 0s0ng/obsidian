# 네트워크가 뭐야?

서로 연결되어 자원을 주고받을 수 있는 구조

컴퓨터 네트워크라고 하면 컴퓨터 장치들이 서로 연결되어서 데이터를 주고받을 수 있는 통신망

# 상황
구글(google.com)에서 "바위 너구리"를 검색
검색 결과 0.27초 소요됨

# 과정

## 클라이언트에서 요청 전송 시 (데이터 캡슐화)

- Application layer(7)
	- http(hyper text transfer protocol)를 사용해서 검색 요청 메세지를 만듬
		- 요청 데이터 : `GET /search?q=바위%20너구리 HTTP/1.1`
- Transport layer(4)
	- 요청 메시지를 안정적으로 서버에 전달할 방법을 결정함
	- TCP를 사용
		- segment = tcp header + http message
		- tcp header = 출발지 포트 번호, 목적지 포트 번호
		- 신뢰성 확보 : 데이터 유실, 순서 바뀜을 막기 위한 역할 수행
- Internet layer(3)
	- segment를 인터넷 상의 목적지 서버로 보내기 위한 주소 정보를 붙임
	- IP를 사용
		- Packet = ip header + segment
		- ip header = 출발지 ip(client), 목적지 ip(google server ip)
- Data Link layer(2)
	- 패킷을 물리적인 네트워크(랜선 또는 wi-fi)를 통해 바로 이웃한 장치(router or switch)에게 전달하기 위한 준비를 함
	- ethernet 또는 Wi-Fi 프로토콜 사용
		- Frame = link header + Packet + link trailer
		- link header = 출발지 mac 주소(클라이언트 랜 카드 주소), 목적지 mac 주소(바로 다음 장치, 가정/사무실 내 라우터의 mac 주소)
		- ARP(Address REsolution Protocol) -> convert ip address to mac address
- Physical Layer(1)
	- 프레임 데이터를 0과 1의 전기 신호 (랜선) 또는 무선 신호 (Wi-Fi)로 변환하여 케이블을 통해 물리적으로 전송

## ↩️ 클라이언트에서의 통신 상세 과정 (응답 수신 시)

구글 서버로부터 검색 결과(HTML 응답 데이터)가 담긴 프레임이 클라이언트에 도착하면, 데이터는 위와 반대로 **아래에서 위로** 이동하며 **역캡슐화**됩니다.

1. **물리 계층 (Layer 1):** 도착한 전기/무선 신호를 0과 1의 **비트 스트림**으로 변환합니다.
    
2. **링크 계층 (Layer 2):** **MAC 주소**를 확인하여 자신에게 온 프레임인지 확인한 후, 헤더와 트레일러를 제거하고 **IP 패킷**을 상위 계층으로 전달합니다.
    
3. **인터넷 계층 (Layer 3):** **IP 주소**를 확인하고 IP 헤더를 제거한 후, **TCP 세그먼트**를 상위 계층으로 전달합니다.
    
4. **전송 계층 (Layer 4):** **포트 번호**를 확인하여 이 응답이 어떤 애플리케이션(특정 브라우저 탭)을 위한 것인지 식별하고, TCP 헤더를 제거한 후 **HTTP 응답 메시지**를 애플리케이션 계층으로 전달합니다.
    
5. **애플리케이션 계층 (Layer 7):** 웹 브라우저가 **HTTP 응답 메시지**에서 HTML 본문을 추출하여 **렌더링**하고 사용자에게 검색 결과를 화면에 표시합니다.